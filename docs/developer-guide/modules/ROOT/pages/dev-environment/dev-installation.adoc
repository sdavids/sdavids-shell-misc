// SPDX-FileCopyrightText: Â© 2024 Sebastian Davids <sdavids@gmx.de>
// SPDX-License-Identifier: Apache-2.0
= Installation
:fnm-install-url: https://github.com/Schniz/fnm#installation
:gh-cli-install-url: https://github.com/cli/cli#linux--bsd
:nvm-install-url: https://github.com/nvm-sh/nvm#installing-and-updating

== brotli

=== Linux

[,console]
----
$ sudo apt-get install brotli
----

=== Mac

[,console]
----
$ brew install brotli
----

== gifsicle

=== Linux

[,console]
----
$ sudo apt-get install gifsicle
----

=== Mac

[,console]
----
$ brew install gifsicle
----

[#gh-cli]
== GitHub CLI

=== Linux

Install {gh-cli-install-url}[GitHub CLI].

=== Mac

[,console]
----
$ brew install gh
----

== gzip

=== Linux

[,console]
----
$ sudo apt-get install gzip
----

=== Mac

[,console]
----
$ brew install gzip
----

== jq

=== Linux

[,console]
----
$ sudo apt-get install jq
----

=== Mac

[,console]
----
$ brew install jq
----

== Node Version Manager

Install {fnm-install-url}[fnm] or {nvm-install-url}[NVM].

=== fnm

.~/.zprofile
[,shell]
----
if command -v fnm >/dev/null 2>&1; then
  eval "$(fnm env --use-on-cd)"
fi
----

=== nvm

.~/.zshrc
[,shell]
----
export NVM_DIR="${HOME}/.nvm"

[ -s "${NVM_DIR}/nvm.sh" ] && . "${NVM_DIR}/nvm.sh"
[ -s "${NVM_DIR}/bash_completion" ] && . "${NVM_DIR}/bash_completion"

if command -v nvm >/dev/null 2>&1; then
  autoload -U add-zsh-hook
  load-nvmrc() {
    local nvmrc_path="$(nvm_find_nvmrc)"
    if [ -n "${nvmrc_path}" ]; then
      local nvmrc_node_version=$(nvm version "$(cat "${nvmrc_path}")")
      if [ "${nvmrc_node_version}" = "N/A" ]; then
        nvm install
      elif [ "${nvmrc_node_version}" != "$(nvm version)" ]; then
        nvm use
      fi
    elif [ -n "$(PWD=$OLDPWD nvm_find_nvmrc)" ] && [ "$(nvm version)" != "$(nvm version default)" ]; then
      echo 'Reverting to nvm default version'
      nvm use default
    fi
  }

  add-zsh-hook chpwd load-nvmrc
  load-nvmrc
fi
----

== ShellCheck

=== Linux

[,console]
----
$ sudo apt-get install shellcheck
----

=== Mac

[,console]
----
$ brew install shellcheck
----

== shfmt

=== Linux

[,console]
----
$ sudo apt-get install shfmt
----

=== Mac

[,console]
----
$ brew install shfmt
----

== yamllint

=== Linux

[,console]
----
$ sudo apt-get install yamllint
----

=== Mac

[,console]
----
$ brew install yamllint
----

== zstd

=== Linux

[,console]
----
$ sudo apt-get install zstd
----

=== Mac

[,console]
----
$ brew install zstd
----
